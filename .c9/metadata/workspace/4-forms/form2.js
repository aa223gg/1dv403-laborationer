{"changed":true,"filter":false,"title":"form2.js","tooltip":"/4-forms/form2.js","value":"\"use strict\";\n\nvar Quiz = {\n    \n    questionNumber: 1,\n    numberOfTries: 1,\n    answerURL: null,\n    input: null,\n    answerID: null,\n    \n    startGame : function(){\n       \n        document.getElementById(\"button\").addEventListener(\"click\", function(){     //Onclick på startknappen\n        Quiz.getQuestion(\"http://vhost3.lnu.se:20080/question/1\");\n        });\n    },\n    \n    getQuestion: function(questionURL){\n        \n        var xhr = new XMLHttpRequest();                                         //Hämta frågan\n        \n        xhr.onreadystatechange = function() {\n           \n            if (xhr.readyState === 4){\n                if (xhr.status === 200){\n                    var text = JSON.parse(xhr.responseText);\n                    document.getElementById(\"question\").innerHTML = text.question;\n                                                                                 \n                    document.getElementById(\"start\").innerHTML = \"Fråga nr: \" + Quiz.questionNumber;\n                    Quiz.answerURL = text.nextURL;\n                    Quiz.answerID = text.id;\n                    \n                    Quiz.createResponseArea(); \n                }\n            }\n         };\n         \n        xhr.open(\"GET\", questionURL, true);\n        xhr.send(null);\n    },\n    \n    createResponseArea: function() {  \n        \n        Quiz.input = document.createElement(\"input\");                            //Skapa textruta för svar\n            Quiz.input.type = \"text\";\n            var response = document.getElementById(\"answer\");\n            response.innerHTML = \"\";\n            response.appendChild(Quiz.input);\n            Quiz.input.focus();                                               \n            \n            var sendButton = document.createElement(\"input\");                       //Skapa knapp \"Svara\"\n            sendButton.type = \"button\";\n            sendButton.value = \"Svara\";\n            var a = document.createElement(\"a\");\n            a.appendChild(sendButton);\n            response.appendChild(a);\n            \n            \n            sendButton.addEventListener(\"click\", function(e){                        //Oncklick på \"Svara\"\n                e.preventDefault();\n                Quiz.sendAnswer(); \n            });\n            \n            Quiz.input.addEventListener(\"keypress\", function(e){                         //Svara med enter\n                if(!e) e = window.event;\n                if (e.keyCode === 13){\n                    Quiz.sendAnswer(); \n                }\n            });\n    },\n    \n    sendAnswer: function(){     \n        \n        var xhrAnswer = new XMLHttpRequest();                                   //Skicka svaret\n         \n                xhrAnswer.onreadystatechange = function() {\n           \n                    if (xhrAnswer.readyState === 4){\n                        if (xhrAnswer.status === 200){\n                            var answerText = JSON.parse(xhrAnswer.responseText);\n                            Quiz.correctAnswer(answerText.nextURL); \n                            \n                        }\n                        else {\n                            \n                            Quiz.numberOfTries += 1;\n                            Quiz.wrongAnswer();  \n                        }\n                    }\n                };\n        \n                xhrAnswer.open(\"POST\", Quiz.answerURL, true);                                  \n                xhrAnswer.setRequestHeader(\"Content-Type\", \"application/json\");\n        \n                var answer = {answer: Quiz.input.value};\n                xhrAnswer.send(JSON.stringify(answer));\n    },\n    \n    correctAnswer: function(nextQuestionURL){  \n        document.getElementById(\"question\").innerHTML = \"\";                     //Text vid rätt svar\n            document.getElementById(\"answer\").innerHTML = \"\";\n            document.getElementById(\"question\").innerHTML = \"Rätt svar!\";\n            var result = document.getElementById(\"result\");\n            var resultPerQuestion = document.createTextNode(\"Du klarade fråga \" + Quiz.questionNumber + \" på \" + Quiz.numberOfTries + \" försök.\");\n            var br = document.createElement(\"br\");\n            result.appendChild(br);\n            result.appendChild(resultPerQuestion);\n            Quiz.numberOfTries = 1;\n            Quiz.questionNumber += 1;\n            \n            var nextQuestion = document.createElement(\"input\");                       //Skapa knapp \"Nästa fråga\"\n            nextQuestion.type = \"button\";\n            nextQuestion.value = \"Nästa fråga\";\n            var aNext = document.createElement(\"a\");\n            aNext.appendChild(nextQuestion);\n            document.getElementById(\"answer\").appendChild(aNext);\n            \n            nextQuestion.addEventListener(\"click\", function(e){                        //Oncklick på \"Nästa fråga\"\n                e.preventDefault();\n                if (nextQuestionURL === undefined){\n                    Quiz.gameOver();\n                }\n                else {\n                Quiz.getQuestion(nextQuestionURL);\n                }\n            });\n            \n            \n    },\n    \n    wrongAnswer: function(){  \n    \n            document.getElementById(\"question\").innerHTML = \"\";                 //Text vid fel svar\n            document.getElementById(\"answer\").innerHTML = \"\";\n            document.getElementById(\"question\").innerHTML = \"Fel.\";\n            \n            var tryAgain = document.createElement(\"input\");                       //Skapa knapp \"Försök igen\"\n            tryAgain.type = \"button\";\n            tryAgain.value = \"Försök igen\";\n            var aNext = document.createElement(\"a\");\n            aNext.appendChild(tryAgain);\n            document.getElementById(\"answer\").appendChild(aNext);\n            \n            tryAgain.addEventListener(\"click\", function(e){                        //Oncklick på \"Försök igen\"\n                e.preventDefault();\n                Quiz.getQuestion(\"http://vhost3.lnu.se:20080/question/\" + Quiz.answerID);\n                \n            });\n        \n    },\n    \n    gameOver: function() {\n        document.getElementById(\"start\").innerHTML = \"\";\n        document.getElementById(\"question\").innerHTML = \"Grattis! Du har klarat alla frågor!\";\n            document.getElementById(\"answer\").innerHTML = \"\";\n    }\n    \n};\n\nwindow.onload = Quiz.startGame();","undoManager":{"mark":99,"position":100,"stack":[[{"group":"doc","deltas":[{"start":{"row":105,"column":32},"end":{"row":105,"column":33},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":105,"column":34},"end":{"row":105,"column":35},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":151,"column":26},"end":{"row":152,"column":0},"action":"insert","lines":["",""]},{"start":{"row":152,"column":0},"end":{"row":152,"column":8},"action":"insert","lines":["        "]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":8},"end":{"row":152,"column":9},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":9},"end":{"row":152,"column":10},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":9},"end":{"row":152,"column":10},"action":"remove","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":8},"end":{"row":152,"column":9},"action":"remove","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":8},"end":{"row":152,"column":9},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":9},"end":{"row":152,"column":10},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":10},"end":{"row":152,"column":11},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":11},"end":{"row":152,"column":12},"action":"insert","lines":["u"]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":8},"end":{"row":152,"column":12},"action":"remove","lines":["docu"]},{"start":{"row":152,"column":8},"end":{"row":152,"column":16},"action":"insert","lines":["document"]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":16},"end":{"row":152,"column":17},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":17},"end":{"row":152,"column":18},"action":"insert","lines":["g"]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":17},"end":{"row":152,"column":18},"action":"remove","lines":["g"]},{"start":{"row":152,"column":17},"end":{"row":152,"column":33},"action":"insert","lines":["getElementById()"]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":32},"end":{"row":152,"column":34},"action":"insert","lines":["\"\""]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":33},"end":{"row":152,"column":34},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":34},"end":{"row":152,"column":35},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":35},"end":{"row":152,"column":36},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":36},"end":{"row":152,"column":37},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":37},"end":{"row":152,"column":38},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":40},"end":{"row":152,"column":41},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":41},"end":{"row":152,"column":42},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":42},"end":{"row":152,"column":43},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":43},"end":{"row":152,"column":44},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":44},"end":{"row":152,"column":45},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":41},"end":{"row":152,"column":45},"action":"remove","lines":["inne"]},{"start":{"row":152,"column":41},"end":{"row":152,"column":50},"action":"insert","lines":["innerHTML"]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":50},"end":{"row":152,"column":51},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":51},"end":{"row":152,"column":52},"action":"insert","lines":["="]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":52},"end":{"row":152,"column":53},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":53},"end":{"row":152,"column":55},"action":"insert","lines":["\"\""]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":55},"end":{"row":152,"column":56},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":119,"column":51},"end":{"row":120,"column":0},"action":"insert","lines":["",""]},{"start":{"row":120,"column":0},"end":{"row":120,"column":20},"action":"insert","lines":["                    "]}]}],[{"group":"doc","deltas":[{"start":{"row":120,"column":20},"end":{"row":120,"column":21},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":120,"column":21},"end":{"row":120,"column":22},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":120,"column":22},"end":{"row":120,"column":23},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":120,"column":23},"end":{"row":120,"column":24},"action":"insert","lines":["u"]}]}],[{"group":"doc","deltas":[{"start":{"row":120,"column":20},"end":{"row":120,"column":24},"action":"remove","lines":["docu"]},{"start":{"row":120,"column":20},"end":{"row":120,"column":28},"action":"insert","lines":["document"]}]}],[{"group":"doc","deltas":[{"start":{"row":120,"column":28},"end":{"row":120,"column":29},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":120,"column":29},"end":{"row":120,"column":30},"action":"insert","lines":["g"]}]}],[{"group":"doc","deltas":[{"start":{"row":120,"column":29},"end":{"row":120,"column":30},"action":"remove","lines":["g"]}]}],[{"group":"doc","deltas":[{"start":{"row":120,"column":29},"end":{"row":120,"column":30},"action":"insert","lines":["g"]}]}],[{"group":"doc","deltas":[{"start":{"row":120,"column":30},"end":{"row":120,"column":31},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":120,"column":29},"end":{"row":120,"column":31},"action":"remove","lines":["ge"]},{"start":{"row":120,"column":29},"end":{"row":120,"column":45},"action":"insert","lines":["getElementById()"]}]}],[{"group":"doc","deltas":[{"start":{"row":120,"column":44},"end":{"row":120,"column":46},"action":"insert","lines":["\"\""]}]}],[{"group":"doc","deltas":[{"start":{"row":120,"column":45},"end":{"row":120,"column":46},"action":"insert","lines":["q"]}]}],[{"group":"doc","deltas":[{"start":{"row":120,"column":46},"end":{"row":120,"column":47},"action":"insert","lines":["u"]}]}],[{"group":"doc","deltas":[{"start":{"row":120,"column":45},"end":{"row":120,"column":47},"action":"remove","lines":["qu"]},{"start":{"row":120,"column":45},"end":{"row":120,"column":53},"action":"insert","lines":["question"]}]}],[{"group":"doc","deltas":[{"start":{"row":120,"column":55},"end":{"row":120,"column":56},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":120,"column":56},"end":{"row":120,"column":57},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":120,"column":57},"end":{"row":120,"column":58},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":120,"column":58},"end":{"row":120,"column":59},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":120,"column":56},"end":{"row":120,"column":59},"action":"remove","lines":["inn"]},{"start":{"row":120,"column":56},"end":{"row":120,"column":65},"action":"insert","lines":["innerHTML"]}]}],[{"group":"doc","deltas":[{"start":{"row":120,"column":65},"end":{"row":120,"column":66},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":120,"column":66},"end":{"row":120,"column":67},"action":"insert","lines":["="]}]}],[{"group":"doc","deltas":[{"start":{"row":120,"column":67},"end":{"row":120,"column":68},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":120,"column":68},"end":{"row":120,"column":70},"action":"insert","lines":["\"\""]}]}],[{"group":"doc","deltas":[{"start":{"row":120,"column":70},"end":{"row":120,"column":71},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":120,"column":71},"end":{"row":121,"column":0},"action":"insert","lines":["",""]},{"start":{"row":121,"column":0},"end":{"row":121,"column":20},"action":"insert","lines":["                    "]}]}],[{"group":"doc","deltas":[{"start":{"row":121,"column":20},"end":{"row":121,"column":21},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":121,"column":21},"end":{"row":121,"column":22},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":121,"column":20},"end":{"row":121,"column":22},"action":"remove","lines":["do"]},{"start":{"row":121,"column":20},"end":{"row":121,"column":28},"action":"insert","lines":["document"]}]}],[{"group":"doc","deltas":[{"start":{"row":121,"column":28},"end":{"row":121,"column":29},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":121,"column":29},"end":{"row":121,"column":30},"action":"insert","lines":["g"]}]}],[{"group":"doc","deltas":[{"start":{"row":121,"column":30},"end":{"row":121,"column":31},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":121,"column":29},"end":{"row":121,"column":31},"action":"remove","lines":["ge"]},{"start":{"row":121,"column":29},"end":{"row":121,"column":45},"action":"insert","lines":["getElementById()"]}]}],[{"group":"doc","deltas":[{"start":{"row":121,"column":44},"end":{"row":121,"column":46},"action":"insert","lines":["\"\""]}]}],[{"group":"doc","deltas":[{"start":{"row":121,"column":45},"end":{"row":121,"column":46},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":121,"column":46},"end":{"row":121,"column":47},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":121,"column":47},"end":{"row":121,"column":48},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":121,"column":48},"end":{"row":121,"column":49},"action":"insert","lines":["u"]}]}],[{"group":"doc","deltas":[{"start":{"row":121,"column":49},"end":{"row":121,"column":50},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":121,"column":50},"end":{"row":121,"column":51},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":121,"column":53},"end":{"row":121,"column":54},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":121,"column":54},"end":{"row":121,"column":55},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":121,"column":55},"end":{"row":121,"column":56},"action":"insert","lines":["m"]}]}],[{"group":"doc","deltas":[{"start":{"row":121,"column":55},"end":{"row":121,"column":56},"action":"remove","lines":["m"]}]}],[{"group":"doc","deltas":[{"start":{"row":121,"column":54},"end":{"row":121,"column":55},"action":"remove","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":121,"column":54},"end":{"row":121,"column":55},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":121,"column":55},"end":{"row":121,"column":56},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":121,"column":54},"end":{"row":121,"column":56},"action":"remove","lines":["in"]},{"start":{"row":121,"column":54},"end":{"row":121,"column":63},"action":"insert","lines":["innerHTML"]}]}],[{"group":"doc","deltas":[{"start":{"row":121,"column":63},"end":{"row":121,"column":64},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":121,"column":64},"end":{"row":121,"column":65},"action":"insert","lines":["="]}]}],[{"group":"doc","deltas":[{"start":{"row":121,"column":65},"end":{"row":121,"column":66},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":121,"column":66},"end":{"row":121,"column":68},"action":"insert","lines":["\"\""]}]}],[{"group":"doc","deltas":[{"start":{"row":121,"column":68},"end":{"row":121,"column":69},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":121,"column":20},"end":{"row":121,"column":69},"action":"remove","lines":["document.getElementById(\"result\").innerHTML = \"\";"]}]}],[{"group":"doc","deltas":[{"start":{"row":121,"column":20},"end":{"row":122,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":121,"column":20},"end":{"row":121,"column":24},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":121,"column":20},"end":{"row":121,"column":24},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":121,"column":20},"end":{"row":121,"column":24},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":121,"column":20},"end":{"row":121,"column":24},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":121,"column":20},"end":{"row":121,"column":24},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":120,"column":20},"end":{"row":120,"column":71},"action":"remove","lines":["document.getElementById(\"question\").innerHTML = \"\";"]}]}],[{"group":"doc","deltas":[{"start":{"row":120,"column":20},"end":{"row":121,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":120,"column":20},"end":{"row":120,"column":24},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":120,"column":20},"end":{"row":120,"column":24},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":120,"column":20},"end":{"row":120,"column":24},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":120,"column":20},"end":{"row":120,"column":24},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":120,"column":20},"end":{"row":120,"column":24},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":48,"column":78},"end":{"row":48,"column":89},"action":"remove","lines":["//FUNKAR EJ"]}]}]]},"ace":{"folds":[],"scrolltop":1694,"scrollleft":0,"selection":{"start":{"row":48,"column":78},"end":{"row":48,"column":78},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":129,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1418416107239}